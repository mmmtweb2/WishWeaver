<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WishWeaver - ×™×•×¦×¨ ×›×¨×˜×™×¡×™ ×‘×¨×›×”</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: 0;
            padding: 20px;
            text-align: center;
            min-height: 100vh;
            background-attachment: fixed;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            font-size: 2.4rem;
            position: relative;
            display: inline-block;
        }

        h1:after {
            content: "";
            position: absolute;
            width: 60%;
            height: 3px;
            background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
            bottom: -10px;
            left: 20%;
            border-radius: 3px;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 1000px;
            margin: 0 auto;
            padding-bottom: 50px;
        }

        .controls {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .controls:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            transform: translateY(-5px);
        }

        .card-preview {
            width: 100%;
            max-width: 500px;
            height: 350px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            position: relative;
            background-color: white;
            transition: all 0.4s ease;
        }

        .card-preview:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
        }

        .card-content {
            padding: 20px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }

        .card-message {
            font-size: 24px;
            margin-bottom: 20px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.7);
        }

        .card-signature {
            font-size: 18px;
            font-style: italic;
        }

        .card-footer {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 12px;
            opacity: 0.7;
            display: flex;
            justify-content: space-between;
            width: calc(100% - 20px);
        }

        .card-footer a {
            color: inherit;
            text-decoration: none;
        }

        .card-footer a:hover {
            text-decoration: underline;
        }

        .wishweaver-link {
            font-size: 11px;
            color: #3498db;
            opacity: 0.8;
            position: absolute;
            left: 10px;
            bottom: 0;
        }

        .wishweaver-link:hover {
            opacity: 1;
            color: #2980b9;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: right;
            transition: all 0.3s ease;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            color: #444;
        }

        input, textarea, select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        input:focus, textarea:focus, select:focus {
            border-color: #3498db;
            box-shadow: inset 0 1px 3px rgba(52, 152, 219, 0.3);
            outline: none;
        }

        textarea {
            height: 80px;
            resize: vertical;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        button {
            background: linear-gradient(to right, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        button:hover {
            background: linear-gradient(to right, #45a049, #409444);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        button.share {
            background: linear-gradient(to right, #3498db, #2980b9);
        }

        button.share:hover {
            background: linear-gradient(to right, #2980b9, #2471a3);
        }
    </style>
    <style>
        .background-selection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .bg-option {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .bg-option:hover {
            transform: scale(1.1);
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }

        .color-picker {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .color-option:hover {
            transform: scale(1.1);
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }

        .event-selection {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .event-option {
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .event-option:hover {
            transform: scale(1.1);
        }

        .event-preview {
            width: 100%;
            height: 60px;
            border-radius: 8px;
            margin-bottom: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .event-preview:hover {
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .event-icon {
            font-size: 24px;
        }

        .event-name {
            font-size: 14px;
        }

        .card-icon {
            font-size: 32px;
            margin-bottom: 15px;
            display: none;
        }

        /* ×¨×§×¢ ××ª×—×œ×£ */
        @keyframes gradientAnimation {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        body.animated-bg {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
        }

        /* ×›×¤×ª×•×¨ ×”×—×œ×¤×ª ×¨×§×¢ */
        .animated-bg-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .animated-bg-toggle:hover {
            transform: rotate(180deg);
        }

        /* ×¤×•×˜×¨ */
        .site-footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px 0;
            color: #666;
            font-size: 14px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .site-footer a {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }

        .site-footer a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        /* ×—×œ×•×Ÿ ×©×™×ª×•×£ ×•×—×œ×•× ×•×ª × ×•×¡×¤×™× */
        .share-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        .share-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 15px;
            z-index: 101;
            width: 80%;
            max-width: 400px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        .share-preview {
            margin: 15px 0;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 8px;
        }
        .share-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        .share-buttons button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            background: #f5f5f5;
            color: #333;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .share-buttons button:hover {
            background: #e0e0e0;
            transform: translateY(-3px);
        }
        .icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .close-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        .share-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 102;
            display: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .confirmation-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
        }
        .confirmation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
        }
        .confirmation-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        .confirmation-preview {
            margin: 15px 0;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 8px;
        }
        .confirmation-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        .confirmation-buttons button {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
        }
        .confirmation-buttons .secondary-btn {
            background: #9e9e9e;
        }
        /* ×¡×’× ×•× ×•×ª ×œ××¡×š ×˜×¢×™× ×” */
#loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.loading-container {
    background: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.loading-spinner {
    border: 5px solid #f3f3f3;
    border-top: 5px solid #3498db;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    margin: 0 auto 15px auto;
}

.loading-message {
    font-size: 18px;
    color: #333;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ×¡×’× ×•× ×•×ª ×œ×—×œ×•×Ÿ ×©×™×ª×•×£ ×—×“×© */
.quick-share-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    font-family: Arial, sans-serif;
}

.share-dialog {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    border-radius: 15px;
    z-index: 101;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    text-align: center;
}

.share-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin: 15px 0;
}

.primary-btn {
    background: #25D366;
    color: white;
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.2s;
}

.secondary-btn {
    background: #f5f5f5;
    color: #333;
    border: none;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.2s;
}

.primary-btn:hover, .secondary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

.icon {
    font-size: 24px;
    margin-bottom: 5px;
}

/* ×¡×’× ×•× ×•×ª ×œ×”×•×“×¢×•×ª ×¦×¤×•×ª */
.floating-message {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 20px;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    z-index: 10000;
    animation: fadeInOut 3s forwards;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    text-align: center;
    min-width: 250px;
    max-width: 90%;
    direction: rtl;
}

.success {
    background-color: #4CAF50;
}

.error {
    background-color: #F44336;
}

@keyframes fadeInOut {
    0% { opacity: 0; transform: translate(-50%, 20px); }
    10% { opacity: 1; transform: translate(-50%, 0); }
    90% { opacity: 1; transform: translate(-50%, 0); }
    100% { opacity: 0; transform: translate(-50%, -20px); }
}

.share-icon {
    margin-right: 5px;
    font-size: 18px;
}
    </style>
</head>
<body>
    <!-- ×›×¤×ª×•×¨ ×œ×”×—×œ×¤×ª ×¨×§×¢ -->
    <div class="animated-bg-toggle" onclick="toggleAnimatedBackground()">ğŸ¨</div>

    <div class="container">
        <h1>WishWeaver - ×™×•×¦×¨ ×›×¨×˜×™×¡×™ ×‘×¨×›×” ×•×™×¨×˜×•××œ×™×™×</h1>
        
        <div class="controls">
            <div class="form-group">
                <label for="message">×”×•×“×¢×ª ×”×‘×¨×›×”:</label>
                <textarea id="message" placeholder="×›×ª×•×‘ ××ª ×”×•×“×¢×ª ×”×‘×¨×›×” ×›××Ÿ...">×××—×œ ×œ×š ×™×•× ×”×•×œ×“×ª ×©××—!</textarea>
            </div>
            
            <div class="form-group">
                <label for="signature">×—×ª×™××”:</label>
                <input type="text" id="signature" placeholder="××™ ×©×•×œ×— ××ª ×”×‘×¨×›×”?" value="××©×¤×—×ª ×™×©×¨××œ×™">
            </div>
            
            
            <div class="form-group">
                <label for="background-type">×¡×•×’ ×¨×§×¢:</label>
                <select id="background-type">
                    <option value="color">×¦×‘×¢ ××—×™×“</option>
                    <option value="gradient">×’×¨×“×™×× ×˜</option>
                    <option value="pattern">×“×•×’××”</option>
                    <option value="event">××™×¨×•×¢</option>
                </select>
            </div>
            
            <div class="form-group" id="color-selection">
                <label>×‘×—×¨ ×¦×‘×¢:</label>
                <div class="color-picker">
                    <div class="color-option" style="background-color: #e74c3c;" onclick="setBackgroundColor('#e74c3c')"></div>
                    <div class="color-option" style="background-color: #3498db;" onclick="setBackgroundColor('#3498db')"></div>
                    <div class="color-option" style="background-color: #2ecc71;" onclick="setBackgroundColor('#2ecc71')"></div>
                    <div class="color-option" style="background-color: #f1c40f;" onclick="setBackgroundColor('#f1c40f')"></div>
                    <div class="color-option" style="background-color: #9b59b6;" onclick="setBackgroundColor('#9b59b6')"></div>
                    <div class="color-option" style="background-color: #e67e22;" onclick="setBackgroundColor('#e67e22')"></div>
                </div>
            </div>
            
            <div class="form-group" id="gradient-selection" style="display: none;">
                <label>×‘×—×¨ ×’×¨×“×™×× ×˜:</label>
                <div class="background-selection">
                    <div class="bg-option" style="background: linear-gradient(to right, #ff416c, #ff4b2b);" onclick="setBackgroundGradient('linear-gradient(to right, #ff416c, #ff4b2b)')"></div>
                    <div class="bg-option" style="background: linear-gradient(to right, #56ccf2, #2f80ed);" onclick="setBackgroundGradient('linear-gradient(to right, #56ccf2, #2f80ed)')"></div>
                    <div class="bg-option" style="background: linear-gradient(to right, #f2994a, #f2c94c);" onclick="setBackgroundGradient('linear-gradient(to right, #f2994a, #f2c94c)')"></div>
                    <div class="bg-option" style="background: linear-gradient(to right, #7b4397, #dc2430);" onclick="setBackgroundGradient('linear-gradient(to right, #7b4397, #dc2430)')"></div>
                </div>
            </div>
            
            <div class="form-group" id="pattern-selection" style="display: none;">
                <label>×‘×—×¨ ×“×•×’××”:</label>
                <div class="background-selection">
                    <div class="bg-option" style="background: repeating-linear-gradient(45deg, #606dbc, #606dbc 10px, #465298 10px, #465298 20px);" onclick="setBackgroundPattern('repeating-linear-gradient(45deg, #606dbc, #606dbc 10px, #465298 10px, #465298 20px)')"></div>
                    <div class="bg-option" style="background: radial-gradient(circle, transparent 20%, #e8e8e8 20%, #e8e8e8 80%, transparent 80%, transparent), radial-gradient(circle, transparent 20%, #e8e8e8 20%, #e8e8e8 80%, transparent 80%, transparent) 25px 25px, linear-gradient(#c1c1c1 2px, transparent 2px) 0 -1px, linear-gradient(90deg, #c1c1c1 2px, #e8e8e8 2px) -1px 0;" onclick="setBackgroundPattern('radial-gradient(circle, transparent 20%, #e8e8e8 20%, #e8e8e8 80%, transparent 80%, transparent), radial-gradient(circle, transparent 20%, #e8e8e8 20%, #e8e8e8 80%, transparent 80%, transparent) 25px 25px, linear-gradient(#c1c1c1 2px, transparent 2px) 0 -1px, linear-gradient(90deg, #c1c1c1 2px, #e8e8e8 2px) -1px 0;')"></div>
                    <div class="bg-option" style="background-color: #e5e5f7; background-image:  linear-gradient(30deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(150deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(30deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(150deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(60deg, #444cf777 25%, transparent 25.5%, transparent 75%, #444cf777 75%, #444cf777), linear-gradient(60deg, #444cf777 25%, transparent 25.5%, transparent 75%, #444cf777 75%, #444cf777); background-size: 20px 35px; background-position: 0 0, 0 0, 10px 18px, 10px 18px, 0 0, 10px 18px;" onclick="setBackgroundPattern('background-color: #e5e5f7; background-image:  linear-gradient(30deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(150deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(30deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(150deg, #444cf7 12%, transparent 12.5%, transparent 87%, #444cf7 87.5%, #444cf7), linear-gradient(60deg, #444cf777 25%, transparent 25.5%, transparent 75%, #444cf777 75%, #444cf777), linear-gradient(60deg, #444cf777 25%, transparent 25.5%, transparent 75%, #444cf777 75%, #444cf777); background-size: 20px 35px; background-position: 0 0, 0 0, 10px 18px, 10px 18px, 0 0, 10px 18px;')"></div>
                </div>
            </div>
            
            <div class="form-group" id="event-selection" style="display: none;">
                <label>×‘×—×¨ ××™×¨×•×¢:</label>
                <div class="background-selection event-selection">
                    <div class="event-option" data-event="birthday" onclick="setEventBackground('birthday')">
                        <div class="event-preview" style="background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);">
                            <div class="event-icon">ğŸ‚</div>
                        </div>
                        <div class="event-name">×™×•× ×”×•×œ×“×ª</div>
                    </div>
                    <div class="event-option" data-event="wedding" onclick="setEventBackground('wedding')">
                        <div class="event-preview" style="background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%);">
                            <div class="event-icon">ğŸ’</div>
                        </div>
                        <div class="event-name">×—×ª×•× ×”</div>
                    </div>
                    <div class="event-option" data-event="newborn" onclick="setEventBackground('newborn')">
                        <div class="event-preview" style="background: linear-gradient(135deg, #E1BEE7 0%, #CE93D8 100%);">
                            <div class="event-icon">ğŸ‘¶</div>
                        </div>
                        <div class="event-name">×œ×™×“×”</div>
                    </div>
                    <div class="event-option" data-event="graduation" onclick="setEventBackground('graduation')">
                        <div class="event-preview" style="background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);">
                            <div class="event-icon">ğŸ“</div>
                        </div>
                        <div class="event-name">×¡×™×•× ×œ×™××•×“×™×</div>
                    </div>
                    <div class="event-option" data-event="holiday" onclick="setEventBackground('holiday')">
                        <div class="event-preview" style="background: linear-gradient(135deg, #42A5F5 0%, #1976D2 100%);">
                            <div class="event-icon">âœ¡ï¸</div>
                        </div>
                        <div class="event-name">×—×’</div>
                    </div>
                    <div class="event-option" data-event="anniversary" onclick="setEventBackground('anniversary')">
                        <div class="event-preview" style="background: linear-gradient(135deg, #EC407A 0%, #C2185B 100%);">
                            <div class="event-icon">â¤ï¸</div>
                        </div>
                        <div class="event-name">×™×•× × ×™×©×•××™×Ÿ</div>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="text-color">×¦×‘×¢ ×˜×§×¡×˜:</label>
                <select id="text-color" onchange="setTextColor(this.value)">
                    <option value="#ffffff">×œ×‘×Ÿ</option>
                    <option value="#000000">×©×—×•×¨</option>
                    <option value="#e74c3c">××“×•×</option>
                    <option value="#3498db">×›×—×•×œ</option>
                    <option value="#2ecc71">×™×¨×•×§</option>
                    <option value="#f1c40f">×¦×”×•×‘</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="font-family">×¡×’× ×•×Ÿ ×’×•×¤×Ÿ:</label>
                <select id="font-family" onchange="setFontFamily(this.value)">
                    <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">×¨×’×™×œ</option>
                    <option value="'Arial Hebrew', Arial, sans-serif">××¨×™××œ</option>
                    <option value="'Courier New', Courier, monospace">×§×•×¨×™××¨</option>
                    <option value="'Times New Roman', Times, serif">×˜×™×™××¡</option>
                    <option value="'David', 'David Libre', serif">×“×•×“</option>
                    <option value="'Miriam', 'Miriam Libre', sans-serif">××¨×™×</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="font-size">×’×•×“×œ ×’×•×¤×Ÿ:</label>
                <select id="font-size" onchange="setFontSize(this.value)">
                    <option value="18px">×§×˜×Ÿ</option>
                    <option value="24px" selected>×‘×™× ×•× ×™</option>
                    <option value="32px">×’×“×•×œ</option>
                    <option value="42px">×’×“×•×œ ×××•×“</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="font-style">×¡×’× ×•×Ÿ ×›×ª×‘:</label>
                <select id="font-style" onchange="setFontStyle(this.value)">
                    <option value="normal">×¨×’×™×œ</option>
                    <option value="italic">× ×˜×•×™</option>
                    <option value="bold">××•×“×’×©</option>
                    <option value="bold italic">××•×“×’×© ×•× ×˜×•×™</option>
                </select>
            </div>
            
            <div class="buttons">
                <button onclick="resetCard()">××™×¤×•×¡</button>
                <button class="share" onclick="shareCard()">×©×™×ª×•×£ <span class="share-icon">ğŸ“¤</span></button>
            </div>
        </div>
        
        <div class="card-preview" id="card-preview">
            <div class="card-content">
                <div class="card-icon" id="card-icon"></div>
                <div class="card-message" id="card-message">×××—×œ ×œ×š ×™×•× ×”×•×œ×“×ª ×©××—!</div>
                <div class="card-signature" id="card-signature">××©×¤×—×ª ×™×©×¨××œ×™</div>
                <div class="card-footer">
                    <a href="https://www.yourwebsite.com" target="_blank" id="website-link">× ×•×¦×¨ ×¢×œ ×™×“×™ ×™×•×¦×¨ ×›×¨×˜×™×¡×™ ×”×‘×¨×›×”</a>
                    <a href="https://mmmtweb2.github.io/WishWeaver/" target="_blank" class="wishweaver-link">WishWeaver</a>
                </div>
            </div>
        </div>
        
        <!-- ×¤×•×˜×¨ ×”××ª×¨ -->
        <div class="site-footer">
            <p>××ª×¨ ×–×” × ×‘× ×” ×‘×™×“×™ <a href="https://mmmtweb2.github.io/MT/index.html" target="_blank">mmmtweb2</a> | ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª &copy; 2025</p>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // ×”×’×“×¨×•×ª ×‘×¨×™×¨×ª ××—×“×œ
        let currentBackground = '#3498db';
        let currentBackgroundType = 'color';
        let currentTextColor = '#ffffff';
        let currentFontFamily = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
        let currentFontSize = '24px';
        let currentFontStyle = 'normal';
        let currentFontWeight = 'normal';
        let currentEventIcon = '';
        
        // ××ª×—×•×œ ×”×›×¨×˜×™×¡
        document.addEventListener('DOMContentLoaded', function() {
            // ×”×’×“×¨×ª ×¡×’× ×•× ×•×ª ×‘×¨×™×¨×ª ××—×“×œ
            document.getElementById('card-preview').style.backgroundColor = currentBackground;
            document.getElementById('card-message').style.color = currentTextColor;
            document.getElementById('card-signature').style.color = currentTextColor;
            
            // ×”×•×¡×¤×ª ×××–×™× ×™ ××™×¨×•×¢×™×
            document.getElementById('message').addEventListener('input', updateCardMessage);
            document.getElementById('signature').addEventListener('input', updateCardSignature);
            document.getElementById('background-type').addEventListener('change', changeBackgroundType);
            document.getElementById('website').addEventListener('input', updateWebsiteLink);
            document.getElementById('website-text').addEventListener('input', updateWebsiteLink);
            
            // ××ª×—×•×œ ×§×™×©×•×¨ ×”××ª×¨
            updateWebsiteLink();
            
            // ×‘×“×™×§×” ×œ×”×¢×“×¤×•×ª ×”×¨×§×¢ ×”××•× ×¤×©
            if (localStorage.getItem('animated-bg') === 'true') {
                document.body.classList.add('animated-bg');
            }
            
            // ×‘×“×™×§×ª ×¤×¨××˜×¨×™× ×‘×›×ª×•×‘×ª ×”××ª×¨
            loadCardFromUrl();
        });

        // ×¤×•× ×§×¦×™×” ×œ×”×—×œ×¤×ª ×¨×§×¢ ××•× ×¤×©
        function toggleAnimatedBackground() {
            document.body.classList.toggle('animated-bg');
            
            // ×©××™×¨×ª ×”×”×¢×“×¤×” ×‘×œ×•×§×œ ×¡×˜×•×¨×’'
            if (document.body.classList.contains('animated-bg')) {
                localStorage.setItem('animated-bg', 'true');
            } else {
                localStorage.setItem('animated-bg', 'false');
            }
        }

        // ×¢×“×›×•×Ÿ ×”×•×“×¢×ª ×”×›×¨×˜×™×¡
        function updateCardMessage() {
            const message = document.getElementById('message').value;
            document.getElementById('card-message').innerText = message;
        }

        // ×¢×“×›×•×Ÿ ×—×ª×™××ª ×”×›×¨×˜×™×¡
        function updateCardSignature() {
            const signature = document.getElementById('signature').value;
            document.getElementById('card-signature').innerText = signature;
        }
        
        // ×¢×“×›×•×Ÿ ×§×™×©×•×¨ ×”××ª×¨
        function updateWebsiteLink() {
            const websiteUrl = document.getElementById('website').value;
            const websiteText = document.getElementById('website-text').value;
            const websiteLink = document.getElementById('website-link');
            
            websiteLink.href = websiteUrl;
            websiteLink.innerText = websiteText;
        }
        
        // ×”×—×œ×¤×ª ×¡×•×’ ×”×¨×§×¢ ×”××•×¦×’
        function changeBackgroundType() {
            const type = document.getElementById('background-type').value;
            
            document.getElementById('color-selection').style.display = 'none';
            document.getElementById('gradient-selection').style.display = 'none';
            document.getElementById('pattern-selection').style.display = 'none';
            document.getElementById('event-selection').style.display = 'none';
            
            document.getElementById(type + '-selection').style.display = 'block';
        }

        // ×”×’×“×¨×ª ×¨×§×¢ ×¦×‘×¢ ××—×™×“
        function setBackgroundColor(color) {
            const cardPreview = document.getElementById('card-preview');
            cardPreview.style.background = color;
            cardPreview.style.backgroundImage = 'none';
            currentBackground = color;
            currentBackgroundType = 'color';
            
            // ×”×¡×ª×¨×ª ××™×™×§×•×Ÿ ×‘×¢×ª ×©×™××•×© ×‘×¨×§×¢ ×¨×’×™×œ
            document.getElementById('card-icon').style.display = 'none';
        }

        // ×”×’×“×¨×ª ×¨×§×¢ ×’×¨×“×™×× ×˜
        function setBackgroundGradient(gradient) {
            document.getElementById('card-preview').style.background = gradient;
            currentBackground = gradient;
            currentBackgroundType = 'gradient';
            
            // ×”×¡×ª×¨×ª ××™×™×§×•×Ÿ ×‘×¢×ª ×©×™××•×© ×‘×¨×§×¢ ×¨×’×™×œ
            document.getElementById('card-icon').style.display = 'none';
        }

        // ×”×’×“×¨×ª ×¨×§×¢ ×¢× ×“×•×’××”
        function setBackgroundPattern(pattern) {
            document.getElementById('card-preview').style.cssText = pattern;
            currentBackground = pattern;
            currentBackgroundType = 'pattern';
            
            // ×”×¡×ª×¨×ª ××™×™×§×•×Ÿ ×‘×¢×ª ×©×™××•×© ×‘×¨×§×¢ ×¨×’×™×œ
            document.getElementById('card-icon').style.display = 'none';
        }
        
        // ×”×’×“×¨×ª ×¨×§×¢ ××™×¨×•×¢ ×¢× ××™×™×§×•×Ÿ
        function setEventBackground(eventType) {
            const cardPreview = document.getElementById('card-preview');
            const cardIcon = document.getElementById('card-icon');
            
            // ××™×¤×•×¡ ×›×œ ×”×¨×§×¢×™× ×•×”×¡×’× ×•× ×•×ª ×”×§×•×“××™×
            cardPreview.style = '';
            
            // ×”×’×“×¨×ª ×¨×§×¢ ×•××™×™×§×•×Ÿ ×‘×”×ª×× ×œ××™×¨×•×¢
            switch(eventType) {
                case 'birthday':
                    cardPreview.style.background = 'linear-gradient(135deg, #FFC107 0%, #FF9800 100%)';
                    cardIcon.innerHTML = 'ğŸ‚';
                    break;
                case 'wedding':
                    cardPreview.style.background = 'linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%)';
                    cardIcon.innerHTML = 'ğŸ’';
                    break;
                case 'newborn':
                    cardPreview.style.background = 'linear-gradient(135deg, #E1BEE7 0%, #CE93D8 100%)';
                    cardIcon.innerHTML = 'ğŸ‘¶';
                    break;
                case 'graduation':
                    cardPreview.style.background = 'linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)';
                    cardIcon.innerHTML = 'ğŸ“';
                    break;
                case 'holiday':
                    cardPreview.style.background = 'linear-gradient(135deg, #42A5F5 0%, #1976D2 100%)';
                    cardIcon.innerHTML = 'âœ¡ï¸';
                    break;
                case 'anniversary':
                    cardPreview.style.background = 'linear-gradient(135deg, #EC407A 0%, #C2185B 100%)';
                    cardIcon.innerHTML = 'â¤ï¸';
                    break;
            }
            
            // ×©××™×¨×ª ××™×“×¢ ×”×¨×§×¢ ×¢×‘×•×¨ ×©×™×ª×•×£
            currentBackground = eventType;
            currentBackgroundType = 'event';
            currentEventIcon = cardIcon.innerHTML;
            
            // ×”×¦×’×ª ×”××™×™×§×•×Ÿ
            cardIcon.style.display = 'block';
        }

        // ×”×’×“×¨×ª ×¦×‘×¢ ×”×˜×§×¡×˜
        function setTextColor(color) {
            document.getElementById('card-message').style.color = color;
            document.getElementById('card-signature').style.color = color;
            currentTextColor = color;
        }
        
        // ×”×’×“×¨×ª ××©×¤×—×ª ×”×’×•×¤×Ÿ
        function setFontFamily(fontFamily) {
            document.getElementById('card-message').style.fontFamily = fontFamily;
            document.getElementById('card-signature').style.fontFamily = fontFamily;
        }
        
        // ×”×’×“×¨×ª ×’×•×“×œ ×”×’×•×¤×Ÿ
        function setFontSize(fontSize) {
            document.getElementById('card-message').style.fontSize = fontSize;
        }
        
        // ×”×’×“×¨×ª ×¡×’× ×•×Ÿ ×”×›×ª×‘
        function setFontStyle(style) {
            if (style === 'normal') {
                document.getElementById('card-message').style.fontStyle = 'normal';
                document.getElementById('card-message').style.fontWeight = 'normal';
            } else if (style === 'italic') {
                document.getElementById('card-message').style.fontStyle = 'italic';
                document.getElementById('card-message').style.fontWeight = 'normal';
            } else if (style === 'bold') {
                document.getElementById('card-message').style.fontStyle = 'normal';
                document.getElementById('card-message').style.fontWeight = 'bold';
            } else if (style === 'bold italic') {
                document.getElementById('card-message').style.fontStyle = 'italic';
                document.getElementById('card-message').style.fontWeight = 'bold';
            }
        }

        // ××™×¤×•×¡ ×”×›×¨×˜×™×¡ ×œ×‘×¨×™×¨×ª ×”××—×“×œ
        function resetCard() {
            document.getElementById('message').value = '×××—×œ ×œ×š ×™×•× ×”×•×œ×“×ª ×©××—!';
            document.getElementById('signature').value = '××©×¤×—×ª ×™×©×¨××œ×™';
            document.getElementById('background-type').value = 'color';
            document.getElementById('text-color').value = '#ffffff';
            document.getElementById('font-family').value = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
            document.getElementById('font-size').value = '24px';
            document.getElementById('font-style').value = 'normal';
            document.getElementById('website').value = 'https://www.yourwebsite.com';
            document.getElementById('website-text').value = '× ×•×¦×¨ ×¢×œ ×™×“×™ ×™×•×¦×¨ ×›×¨×˜×™×¡×™ ×”×‘×¨×›×”';
            
            changeBackgroundType();
            setBackgroundColor('#3498db');
            setTextColor('#ffffff');
            setFontFamily("'Segoe UI', Tahoma, Geneva, Verdana, sans-serif");
            setFontSize('24px');
            setFontStyle('normal');
            updateCardMessage();
            updateCardSignature();
            updateWebsiteLink();
            
            // ×”×¡×ª×¨×ª ×”××™×™×§×•×Ÿ
            document.getElementById('card-icon').style.display = 'none';
            currentBackgroundType = 'color';
            currentEventIcon = '';
        }
        //×¤×•× ×§×¦×™×™×ª ×©×™×ª×•×£ #############################################################################################
        // ×¤×•× ×§×¦×™×™×ª ×©×™×ª×•×£ ××©×•×¤×¨×ª
        function shareCard() {
    // ×™×¦×™×¨×ª ×›×ª×•×‘×ª URL ×œ×©×™×ª×•×£
    const currentUrl = new URL(window.location.href);
    const baseUrl = currentUrl.origin + currentUrl.pathname.replace('index.html', '');
    
    // ×™×¦×™×¨×ª ×›×ª×•×‘×ª URL ×œ×¢××•×“ ×”×¦×¤×™×™×” ×¢× ×›×œ ×”×¤×¨××˜×¨×™×
    const viewUrl = new URL('view-card.html', baseUrl);
    
    // ×”×¢×‘×¨×ª ×›×œ ×¤×¨××˜×¨×™ ×”×¢×™×¦×•×‘ ×œ×›×ª×•×‘×ª ×”×¦×¤×™×™×”
    const message = encodeURIComponent(document.getElementById('message').value);
    const signature = encodeURIComponent(document.getElementById('signature').value);
    
    viewUrl.searchParams.append('msg', message);
    viewUrl.searchParams.append('sig', signature);
    viewUrl.searchParams.append('bgType', currentBackgroundType);
    
    // ×”×•×¡×¤×ª ××™×“×¢ ×¡×¤×¦×™×¤×™ ×œ×¡×•×’ ×”×¨×§×¢
    if (currentBackgroundType === 'color' || currentBackgroundType === 'gradient') {
        viewUrl.searchParams.append('bgInfo', encodeURIComponent(currentBackground));
    } else if (currentBackgroundType === 'pattern') {
        viewUrl.searchParams.append('bgInfo', encodeURIComponent(currentBackground));
    } else if (currentBackgroundType === 'event') {
        viewUrl.searchParams.append('bgInfo', currentBackground);
    }
    
    // ×”×•×¡×¤×ª ×¤×¨××˜×¨×™× × ×•×¡×¤×™× ×©×œ ×¢×™×¦×•×‘
    viewUrl.searchParams.append('txtColor', encodeURIComponent(currentTextColor));
    viewUrl.searchParams.append('font', encodeURIComponent(currentFontFamily));
    viewUrl.searchParams.append('fontSize', encodeURIComponent(currentFontSize));
    viewUrl.searchParams.append('fontStyle', encodeURIComponent(currentFontStyle));
    
    // ×©×™××•×© ×‘-URL ×©×œ ×¢××•×“ ×”×¦×¤×™×™×”
    const shareUrl = viewUrl.toString();
    
    if (navigator.share) {
        navigator.share({
            title: '×›×¨×˜×™×¡ ×‘×¨×›×” ×-WishWeaver',
            text: '×©×œ×—×ª×™ ×œ×š ×›×¨×˜×™×¡ ×‘×¨×›×” ××™×•×—×“!',
            url: shareUrl
        }).then(() => {
            console.log('×©×•×ª×£ ×‘×”×¦×œ×—×”');
        }).catch((error) => {
            console.log('×©×’×™××” ×‘×©×™×ª×•×£:', error);
            showShareDialog(shareUrl);
        });
    } else {
        showShareDialog(shareUrl);
    }
}

    // ×¤×•× ×§×¦×™×” ×œ×”×¦×’×ª ×“×™××œ×•×’ ×©×™×ª×•×£ ×—×œ×•×¤×™
    function showShareDialog(shareUrl) {
        // ×™×¦×™×¨×ª ×—×œ×•×Ÿ ×“×™××œ×•×’ ×—×“×©
        const shareModal = document.createElement('div');
        shareModal.className = 'share-overlay';
        shareModal.innerHTML = `
            <div class="share-dialog">
                <h3>×©×™×ª×•×£ ×›×¨×˜×™×¡ ×”×‘×¨×›×”</h3>
                <p>×‘×—×¨ ××—×ª ××”××¤×©×¨×•×™×•×ª:</p>
                <div class="share-buttons">
                    <button id="whatsapp-btn" class="share-btn">
                        <span class="icon">ğŸ“±</span>
                        <span>×•×•××˜×¡××¤</span>
                    </button>
                    <button id="email-btn" class="share-btn">
                        <span class="icon">âœ‰ï¸</span>
                        <span>××™××™×™×œ</span>
                    </button>
                    <button id="copy-link-btn" class="share-btn">
                        <span class="icon">ğŸ”—</span>
                        <span>×”×¢×ª×§ ×§×™×©×•×¨</span>
                    </button>
                </div>
                <button id="close-share-btn" class="close-btn">×¡×’×•×¨</button>
            </div>
        `;
        
        document.body.appendChild(shareModal);
        
        // ×”×•×¡×¤×ª ×××–×™× ×™ ××™×¨×•×¢×™×
        document.getElementById('whatsapp-btn').addEventListener('click', function() {
            window.open(`https://wa.me/?text=${encodeURIComponent('×©×œ×—×ª×™ ×œ×š ×›×¨×˜×™×¡ ×‘×¨×›×” ××™×•×—×“! ' + shareUrl)}`, '_blank');
            shareModal.remove();
        });
        
        document.getElementById('email-btn').addEventListener('click', function() {
            const subject = encodeURIComponent('×›×¨×˜×™×¡ ×‘×¨×›×” ××™×•×—×“ ×¢×‘×•×¨×š');
            const body = encodeURIComponent('×©×œ×—×ª×™ ×œ×š ×›×¨×˜×™×¡ ×‘×¨×›×” ××™×•×—×“! ×œ×¦×¤×™×™×” ×‘×›×¨×˜×™×¡: ' + shareUrl);
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
            shareModal.remove();
        });
        
        document.getElementById('copy-link-btn').addEventListener('click', function() {
            navigator.clipboard.writeText(shareUrl).then(() => {
                alert('×”×§×™×©×•×¨ ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!');
                shareModal.remove();
            }).catch(err => {
                console.error('×©×’×™××” ×‘×”×¢×ª×§×ª ×”×§×™×©×•×¨:', err);
                alert('×œ× ×”×¦×œ×—× ×• ×œ×”×¢×ª×™×§ ××ª ×”×§×™×©×•×¨. × ×¡×” ×©× ×™×ª.');
            });
        });
        
        document.getElementById('close-share-btn').addEventListener('click', function() {
            shareModal.remove();
        });
    }

    // ×”×¦×’×ª ××¡×š ×˜×¢×™× ×”
    function showLoading(message) {
        const loadingOverlay = document.createElement('div');
        loadingOverlay.id = 'loading-overlay';
        loadingOverlay.innerHTML = `
            <div class="loading-container">
                <div id="message-area"></div>
                <div class="loading-spinner"></div>
                <div class="loading-message">${message}</div>
            </div>
        `;
        
        document.body.appendChild(loadingOverlay);
    }

    // ×”×¡×ª×¨×ª ××¡×š ×˜×¢×™× ×”
    function hideLoading() {
        const overlay = document.getElementById('loading-overlay');
        if (overlay) {
            overlay.remove();
        }
    }

    // ×”×¦×’×ª ××¤×©×¨×•×™×•×ª ×©×™×ª×•×£ ×—×œ×•×¤×™×•×ª ×¢× ×“×’×© ×¢×œ ×¤×¢×•×œ×” ××•×˜×•××˜×™×ª
    function showSharingOptions(cardImage) {
        // ×‘×“×™×§×ª ×¡×•×’ ×”××›×©×™×¨ ×œ×‘×—×™×¨×ª ××¤×©×¨×•×ª ×”×©×™×ª×•×£ ×”××™×˜×‘×™×ª
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            // ×‘××›×©×™×¨×™× × ×™×™×“×™× - × ×¦×™×’ ×“×™××œ×•×’ ×©×™×ª×•×£ ××”×™×¨
            showQuickShareDialog(cardImage);
        } else {
            // ×‘××—×©×‘×™× - × × ×¡×” ×œ×”×•×¨×™×“ ××ª ×”×ª××•× ×” ××•×˜×•××˜×™×ª
            downloadImage(cardImage);
            showSuccessMessage("×”×›×¨×˜×™×¡ ×”×•×¨×“ ×‘×”×¦×œ×—×” ×œ××—×©×‘ ×©×œ×š");
        }
    }

    // ×“×™××œ×•×’ ×©×™×ª×•×£ ××”×™×¨ ×œ××›×©×™×¨×™× × ×™×™×“×™×
    function showQuickShareDialog(cardImage) {
        const shareModal = document.createElement('div');
        shareModal.className = 'quick-share-modal';
        shareModal.innerHTML = `
            <div class="share-overlay"></div>
            <div class="share-dialog">
                <h3>×©×™×ª×•×£ ××”×™×¨</h3>
                <div class="share-preview">
                    <img src="${cardImage}" alt="×›×¨×˜×™×¡ ×‘×¨×›×”" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                </div>
                <div class="share-buttons">
                    <button id="whatsapp-btn" class="primary-btn">
                        <span class="icon">ğŸ“±</span>
                        <span>×©×™×ª×•×£ ×‘×•×•××˜×¡××¤</span>
                    </button>
                    <button id="clipboard-btn" class="secondary-btn">
                        <span class="icon">ğŸ“‹</span>
                        <span>×”×¢×ª×§ ×œ×–×™×›×¨×•×Ÿ</span>
                    </button>
                </div>
                <div class="share-buttons">
                    <button id="download-btn" class="secondary-btn">
                        <span class="icon">ğŸ’¾</span>
                        <span>×”×•×¨×“ ×ª××•× ×”</span>
                    </button>
                    <button id="close-share-btn" class="secondary-btn">
                        <span class="icon">âŒ</span>
                        <span>×¡×’×•×¨</span>
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(shareModal);
        
        // ×”×•×¡×¤×ª ×××–×™× ×™ ××™×¨×•×¢×™×
        
        // ×©×™×ª×•×£ ×‘×•×•××˜×¡××¤
        document.getElementById('whatsapp-btn').addEventListener('click', function() {
            try {
                // ×¤×ª×™×—×ª ×•×•××˜×¡××¤ ×¢× ×”×•×“×¢×” ××•×ª×××ª
                const shareText = encodeURIComponent("×›×¨×˜×™×¡ ×‘×¨×›×” ××™×•×—×“ ×¢×‘×•×¨×š!");
                window.open(`https://api.whatsapp.com/send?text=${shareText}%20${window.location.href}`, '_blank');
                // ×©××™×¨×ª ×”×›×¨×˜×™×¡ ×œ×–×™×›×¨×•×Ÿ ×”××§×•××™
                saveCardToLocalStorage(cardImage);
                shareModal.remove();
            } catch (e) {
                console.error("×©×’×™××” ×‘×¤×ª×™×—×ª ×•×•××˜×¡××¤:", e);
                showErrorMessage("×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×•×•××˜×¡××¤. × ×¡×” ×‘××¤×©×¨×•×ª ××—×¨×ª.");
            }
        });
        
    // ×”×¢×ª×§×” ×œ×œ×•×—
    document.getElementById('clipboard-btn').addEventListener('click', async function() {
        try {
            // × ×™×¡×™×•×Ÿ ×œ×”×¢×ª×™×§ ××ª ×”×ª××•× ×” ×œ×œ×•×—
            const blob = await (await fetch(cardImage)).blob();
            const data = [new ClipboardItem({ [blob.type]: blob })];
            await navigator.clipboard.write(data);
            showSuccessMessage("×”×ª××•× ×” ×”×•×¢×ª×§×” ×œ×œ×•×—. ×›×¢×ª ××¤×©×¨ ×œ×”×“×‘×™×§ ××•×ª×” ×‘×›×œ ×™×™×©×•×");
            shareModal.remove();
        } catch (e) {
            console.error("×©×’×™××” ×‘×”×¢×ª×§×” ×œ×œ×•×—:", e);
            // ×× ×œ× ××¦×œ×™×— ×œ×”×¢×ª×™×§ ×ª××•× ×”, × × ×¡×” ×œ×”×¢×ª×™×§ ××ª ×”×§×™×©×•×¨
            copyLinkToClipboard();
            showSuccessMessage("×”×§×™×©×•×¨ ×œ×›×¨×˜×™×¡ ×”×•×¢×ª×§ ×œ×œ×•×—");
            shareModal.remove();
        }
    });
    
    // ×”×•×¨×“×ª ×ª××•× ×”
    document.getElementById('download-btn').addEventListener('click', function() {
        downloadImage(cardImage);
        showSuccessMessage("×”×ª××•× ×” ×”×•×¨×“×” ×‘×”×¦×œ×—×”");
        shareModal.remove();
    });
    
    // ×¡×’×™×¨×ª ×”×—×œ×•×Ÿ
    document.getElementById('close-share-btn').addEventListener('click', function() {
        shareModal.remove();
    });
    
    document.querySelector('.share-overlay').addEventListener('click', function() {
        shareModal.remove();
    });
}

    // ×¤×•× ×§×¦×™×” ×œ×”×•×¨×“×ª ×ª××•× ×”
    function downloadImage(imageData) {
        // ×™×¦×™×¨×ª ××œ×× ×˜ ×§×™×©×•×¨ ×–×× ×™ ×œ×”×•×¨×“×”
        const link = document.createElement('a');
        link.href = imageData;
        link.download = 'wishweaver-card-' + new Date().getTime() + '.png';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    // ×¤×•× ×§×¦×™×” ×œ×”×¢×ª×§×ª ×§×™×©×•×¨ ×œ×›×¨×˜×™×¡
    function copyLinkToClipboard() {
        try {
            // ×§×‘×œ×ª ×”×›×ª×•×‘×ª ×”× ×•×›×—×™×ª ×©×œ ×”×“×£
            const cardUrl = window.location.href;
            
            // ×”×¢×ª×§×ª ×”×›×ª×•×‘×ª ×œ×œ×•×—
            navigator.clipboard.writeText(cardUrl);
        } catch (e) {
            console.error("×©×’×™××” ×‘×”×¢×ª×§×ª ×§×™×©×•×¨:", e);
        }
    }

    // ×¤×•× ×§×¦×™×” ×œ×”×¦×’×ª ×”×•×“×¢×ª ×”×¦×œ×—×”
    function showSuccessMessage(message) {
        showMessage(message, 'success');
    }

    // ×¤×•× ×§×¦×™×” ×œ×”×¦×’×ª ×”×•×“×¢×ª ×©×’×™××”
    function showErrorMessage(message) {
        showMessage(message, 'error');
    }

    // ×¤×•× ×§×¦×™×” ×œ×”×¦×’×ª ×”×•×“×¢×•×ª (×”×¦×œ×—×” ××• ×©×’×™××”)
    function showMessage(message, type) {
        // ×”×¡×¨×ª ×”×•×“×¢×•×ª ×§×•×“××•×ª
        const existingMessages = document.querySelectorAll('.floating-message');
        existingMessages.forEach(msg => msg.remove());
        
        // ×™×¦×™×¨×ª ××œ×× ×˜ ×”×•×“×¢×” ×—×“×©
        const messageElement = document.createElement('div');
        messageElement.className = `floating-message ${type}`;
        messageElement.innerHTML = message;
        
        document.body.appendChild(messageElement);
        
        // ×”×¡×¨×ª ×”×”×•×“×¢×” ××—×¨×™ 3 ×©× ×™×•×ª
        setTimeout(() => {
            if (messageElement.parentNode) {
                messageElement.remove();
            }
        }, 3000);
    }

    // ×©××™×¨×ª ×”×›×¨×˜×™×¡ ×‘×œ×•×§×œ ×¡×˜×•×¨×’' ×œ×¦×•×¨×š ×©×—×–×•×¨ ××”×™×¨
    function saveCardToLocalStorage(imageData) {
        try {
            localStorage.setItem('lastGeneratedCard', imageData);
            localStorage.setItem('lastCardTimestamp', new Date().getTime());
        } catch (e) {
            console.error("×©×’×™××” ×‘×©××™×¨×ª ×”×›×¨×˜×™×¡ ×œ×–×™×›×¨×•×Ÿ ×”××§×•××™:", e);
        }
    }

        //##############################################################################################################
        // ×˜×¢×™× ×ª ×›×¨×˜×™×¡ ××¤×¨××˜×¨×™× ×‘×›×ª×•×‘×ª ×”××ª×¨
        function loadCardFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            
            if (urlParams.has('msg')) {
                const message = decodeURIComponent(urlParams.get('msg'));
                document.getElementById('message').value = message;
                updateCardMessage();
            }
            
            if (urlParams.has('sig')) {
                const signature = decodeURIComponent(urlParams.get('sig'));
                document.getElementById('signature').value = signature;
                updateCardSignature();
            }
            
            if (urlParams.has('bgType')) {
                const bgType = urlParams.get('bgType');
                document.getElementById('background-type').value = bgType;
                changeBackgroundType();
                
                if (urlParams.has('bgInfo')) {
                    const bgInfo = decodeURIComponent(urlParams.get('bgInfo'));
                    if (bgType === 'color') {
                        setBackgroundColor(bgInfo);
                    } else if (bgType === 'gradient') {
                        setBackgroundGradient(bgInfo);
                    } else if (bgType === 'pattern') {
                        setBackgroundPattern(bgInfo);
                    } else if (bgType === 'event') {
                        setEventBackground(bgInfo);
                    }
                }
            }
            
            if (urlParams.has('txtColor')) {
                const textColor = decodeURIComponent(urlParams.get('txtColor'));
                document.getElementById('text-color').value = textColor;
                setTextColor(textColor);
            }
            
            if (urlParams.has('font')) {
                const fontFamily = decodeURIComponent(urlParams.get('font'));
                document.getElementById('font-family').value = fontFamily;
                setFontFamily(fontFamily);
            }
            
            if (urlParams.has('fontSize')) {
                const fontSize = decodeURIComponent(urlParams.get('fontSize'));
                document.getElementById('font-size').value = fontSize;
                setFontSize(fontSize);
            }
            
            if (urlParams.has('fontStyle')) {
                const fontStyle = decodeURIComponent(urlParams.get('fontStyle'));
                document.getElementById('font-style').value = fontStyle;
                setFontStyle(fontStyle);
            }
            
            if (urlParams.has('website')) {
                const website = decodeURIComponent(urlParams.get('website'));
                document.getElementById('website').value = website;
            }
            
            if (urlParams.has('websiteText')) {
                const websiteText = decodeURIComponent(urlParams.get('websiteText'));
                document.getElementById('website-text').value = websiteText;
            }
            
            // ×¢×“×›×•×Ÿ ×§×™×©×•×¨ ×”××ª×¨ ×œ××—×¨ ×˜×¢×™× ×ª ×›×œ ×”×¤×¨××˜×¨×™×
            // ×¢×“×›×•×Ÿ ×§×™×©×•×¨ ×”××ª×¨
        function updateWebsiteLink() {
            // ×›××Ÿ × ×™×ª×Ÿ ×œ×¢×“×›×Ÿ ××ª ×˜×§×¡×˜ ×”-footer ×× ×¦×¨×™×š
            const websiteLink = document.getElementById('https://mmmtweb2.github.io/WishWeaver/');
            if (websiteLink) {
                websiteLink.textContent = "× ×•×¦×¨ ×¢×œ ×™×“×™ ×™×•×¦×¨ ×›×¨×˜×™×¡×™ ×”×‘×¨×›×”";
            }
        }
        }
    </script>

</body>
</html>
